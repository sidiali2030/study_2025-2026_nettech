---
## Author
author:
  name: Бахи сиди али темассини
  degrees: Student (3 курс)
  orcid: ""
  email: 1032234211@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа №6
subtitle: "Дисциплина: Сетевые технологии"
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---
## **Цель работы**

* Изучить принципы распределения адресного пространства IPv4 и IPv6
* Освоить методы разбиения сетей на подсети
* Настроить и проверить работу двойного стека IPv4/IPv6
* Проанализировать изоляцию подсетей и сетевой трафик


## **Разбиение IPv4-сети на подсети (Задание 1)**

**Исходная сеть:** `172.16.20.0/24`

* Маска: `255.255.255.0`
* Диапазон узлов: `172.16.20.1 – 172.16.20.254`
* Broadcast: `172.16.20.255`

**Требуется:** 3 подсети на `126 / 62 / 62` узла



## **IPv4: Результат разбиения**

* **Подсеть 1:** `172.16.20.0/25`

  * Узлы: `172.16.20.1 – 172.16.20.126`
  * Broadcast: `172.16.20.127`

* **Подсеть 2:** `172.16.20.128/26`

  * Узлы: `172.16.20.129 – 172.16.20.190`
  * Broadcast: `172.16.20.191`

* **Подсеть 3:** `172.16.20.192/26`

  * Узлы: `172.16.20.193 – 172.16.20.254`
  * Broadcast: `172.16.20.255`

- Подсети не пересекаются
- Адресное пространство использовано полностью



## **Разбиение IPv4-сети (Задание 2)**

**Исходная сеть:** `10.10.1.64/26`

* Маска: `255.255.255.192`
* Диапазон узлов: `10.10.1.65 – 10.10.1.126`

**Выделение подсети на 30 узлов:**

* Новый префикс: `/27`
* Подсеть: `10.10.1.64/27`
* Диапазон узлов: `10.10.1.65 – 10.10.1.94`
* Broadcast: `10.10.1.95`



## **Разбиение IPv4-сети (Задание 3)**

**Исходная сеть:** `10.10.1.0/26`

* Диапазон узлов: `10.10.1.1 – 10.10.1.62`

**Подсеть на 14 узлов:**

* Префикс: `/28`
* Подсеть: `10.10.1.0/28`
* Узлы: `10.10.1.1 – 10.10.1.14`
* Broadcast: `10.10.1.15`



## **Разбиение IPv6-сети (Задание 1)**

**Исходная сеть:** `2001:db8:c0de::/48`
(документационное пространство IPv6)

* Диапазон адресов:

  * `2001:db8:c0de::` – `2001:db8:c0de:ffff:ffff:ffff:ffff:ffff`


## **IPv6: Способ 1 — Subnet ID**

* Используется 1 бит Subnet ID
* Новый префикс: `/49`

**Результат:**

* `2001:db8:c0de:0000::/49`
* `2001:db8:c0de:8000::/49`

- Деление на две равные подсети
- Interface ID остаётся 64-битным



## **IPv6: Способ 2 — Interface ID**

* Выбрана подсеть `/64`
* Используется 1 бит Interface ID
* Новый префикс: `/65`

**Результат:**

* `2001:db8:c0de:0000::/65`
* `2001:db8:c0de:0000:8000::/65`

- Деление внутри одной `/64`
- Уменьшение Interface ID до 63 бит


## Настройка двойного стека IPv4/IPv6 — Топология

- Создан проект в GNS3  
- Используются FRR (IPv4) и VyOS (IPv6)  
- Включён захват трафика  

![Топология сети IPv4 и IPv6](image/1.png){width=70%}



## IPv4: Настройка PC1

- Адрес: `172.16.20.10/25`  
- Шлюз: `172.16.20.1`  
- Проверка: `show ip`, `show ipv6`  

![PC1 IPv4](image/2.png){width=70%}



## IPv4: Настройка PC2

- Адрес: `172.16.20.138/25`  
- Шлюз: `172.16.20.129`  

![PC2 IPv4](image/3.png){width=70%}



## IPv4: Настройка сервера

- Адрес: `64.100.1.10/24`  
- Шлюз: `64.100.1.1`  

![Server IPv4](image/4.png){width=70%}



## FRR: Настройка интерфейсов

- eth0 — `172.16.20.1/25`  
- eth1 — `172.16.20.129/25`  
- eth2 — `64.100.1.1/24`  

![FRR interfaces](image/5.png){width=70%}



## FRR: Проверка running-config

- Проверены IPv4-адреса интерфейсов  
- Конфигурация сохранена  

![FRR running-config](image/6.png){width=70%}



## FRR: Состояние интерфейсов

- Интерфейсы в состоянии *up*  
- Адреса назначены корректно  

![FRR interface brief](image/7.png){width=70%}



## IPv4: Проверка связности PC2 → PC1

- Использованы `ping` и `trace`  
- Потерь пакетов нет  

![Ping PC2 → PC1](image/8.png){width=70%}



## IPv4: Проверка PC2 → Server

- Связность подтверждена  
- Корректный маршрут через FRR  

![Ping PC2 → Server](image/9.png){width=70%}



## IPv6: Настройка сервера

- IPv6: `2001:db8:c0de:11::a/64`  
- Dual Stack  

![Server IPv6](image/10.png){width=70%}



## IPv6: Настройка PC3

- IPv6: `2001:db8:c0de:12::a/64`  

![PC3 IPv6](image/11.png){width=70%}



## IPv6: Настройка PC4

- IPv6: `2001:db8:c0de:13::a/64`  

![PC4 IPv6](image/12.png){width=70%}



## VyOS: Изменение имени

- Hostname: `msk-bahis-gw-02`  
- Конфигурация сохранена  

![VyOS hostname](image/13.png){width=70%}



## VyOS: IPv6 и Router Advertisement

- IPv6 назначен интерфейсам  
- Включён RA  

![VyOS IPv6 RA](image/14.png){width=70%}



## VyOS: Проверка интерфейсов

- IPv6-адреса активны  
- Интерфейсы *up*  

![VyOS interfaces](image/15.png){width=70%}



## Dual Stack Server

- Доступен из IPv4 и IPv6  

![Dual Stack access](image/23.png){width=70%}



## Анализ трафика: ICMP IPv4

- Echo Request / Reply  
- Destination Unreachable  

![ICMP IPv4](image/24.png){width=70%}



## Анализ трафика: Детализация

- Ethernet + IPv4 + ICMP  
- MAC-адреса и тайминги  

![ICMP details](image/25.png){width=70%}



## Самостоятельно: Подсеть 10.10.1.96/27

- 30 хостов  
- Маска `/27`  

![Subnet 10.10.1.96](image/26.png){width=70%}



## Самостоятельно: Подсеть 10.10.1.16/28

- 14 хостов  
- Маска `/28`  

![Subnet 10.10.1.16](image/27.png){width=70%}



## Таблица адресации

- Минимальные адреса на router  
- Корректная схема  

![Addressing table](image/28.png){width=70%}



## GNS3: Переименование устройств

- Имена по шаблону  
- Топология сохранена  

![GNS3 names](image/29.png){width=70%}



## PC1-bahis: IPv4/IPv6

- IPv4 + IPv6 назначены  

![PC1 config](image/30.png){width=70%}



## PC1-bahis: Проверка

- show ip  
- show ipv6  

![PC1 verify](image/31.png){width=70%}



## PC2-bahis: IPv4/IPv6

- IPv4 + IPv6 назначены  

![PC2 config](image/32.png){width=70%}



## PC2-bahis: Проверка

- Параметры корректны  

![PC2 verify](image/33.png){width=70%}



## VyOS: Интерфейсы (IPv4/IPv6)

- Минимальные адреса  
- RA активен  

![VyOS interfaces](image/34.png){width=70%}



## VyOS: Проверка

- show interface  

![VyOS verify](image/35.png){width=70%}


## **Выводы**

* Освоены методы разбиения IPv4 и IPv6 сетей
* Реализована корректная адресация и маршрутизация
* Настроен и проверен Dual Stack
* Подтверждена изоляция IPv4 и IPv6
* Анализ ICMP-трафика подтвердил корректность конфигурации


